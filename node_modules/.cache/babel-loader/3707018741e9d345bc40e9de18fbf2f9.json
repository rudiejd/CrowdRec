{"ast":null,"code":"import _classCallCheck from\"/home/jd/git/CrowdRec/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/jd/git/CrowdRec/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/jd/git/CrowdRec/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/jd/git/CrowdRec/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/jd/git/CrowdRec/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Button}from'react-bootstrap';import{connect}from'react-redux';// I got most of this authorization method from StackOverflow. I used redux to share the token across components. \nexport var authEndpoint='https://accounts.spotify.com/authorize';var SpotifyAuth=/*#__PURE__*/function(_Component){_inherits(SpotifyAuth,_Component);var _super=_createSuper(SpotifyAuth);function SpotifyAuth(props){var _this;_classCallCheck(this,SpotifyAuth);_this=_super.call(this,props);_this.state={isAuthenticatedWithSpotify:false};_this.state.handleRedirect=_this.handleRedirect.bind(_assertThisInitialized(_this));return _this;}/**\n   * Runs after component mounts,  decodes the access token if applicable\n   */_createClass(SpotifyAuth,[{key:\"componentDidMount\",value:function componentDidMount(){var hash=window.location.hash.substring(1).split('&').reduce(function(initial,item){if(item){var parts=item.split('=');initial[parts[0]]=decodeURIComponent(parts[1]);}return initial;},{});var access_token=hash.access_token;this.props.change({'name':'token','value':access_token});}/**\n * On click of button, redirect to the spotify Implicit-Grant flow portal with our presets. Auth modes used:\n *  user-read-private\n *  playlist-modify-public\n *  playlist-modify-private\n * @param {*} event Change event for button \n */},{key:\"handleRedirect\",value:function handleRedirect(event){event.preventDefault();var url='https://accounts.spotify.com/authorize'+'?response_type=token'+'&client_id=3f31f6d13b974219a7093698a47d76f9'+'&scope='+encodeURIComponent('user-read-private%20playlist-modify-public%20playlist-modify-private')+'&redirect_uri='+encodeURIComponent('https://crowdrec.rudiejd.io');window.location=url;}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(Button,{className:\"sp_button mt-4\",onClick:function onClick(event){return _this2.handleRedirect(event);}},\"Link spotify to get started\");}}]);return SpotifyAuth;}(Component);var mapStateToProps=function mapStateToProps(state){return{vars:state.vars};};// mapping the dispatches from our reducer to box props \nvar mapDispatchToProps=function mapDispatchToProps(dispatch){return{change:function change(vName){return dispatch({type:'CHANGE',name:vName});}};};export default connect(mapStateToProps,mapDispatchToProps)(SpotifyAuth);","map":{"version":3,"sources":["/home/jd/git/CrowdRec/src/components/SpotifyAuth.js"],"names":["React","Component","Button","connect","authEndpoint","SpotifyAuth","props","state","isAuthenticatedWithSpotify","handleRedirect","bind","hash","window","location","substring","split","reduce","initial","item","parts","decodeURIComponent","access_token","change","event","preventDefault","url","encodeURIComponent","mapStateToProps","vars","mapDispatchToProps","dispatch","vName","type","name"],"mappings":"wgBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAAQC,MAAR,KAAqB,iBAArB,CACA,OAAQC,OAAR,KAAsB,aAAtB,CAEA;AAEA,MAAO,IAAMC,CAAAA,YAAY,CAAG,wCAArB,C,GACDC,CAAAA,W,0GACJ,qBAAYC,KAAZ,CAAmB,6CACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,0BAA0B,CAAE,KADjB,CAAb,CAGA,MAAKD,KAAL,CAAWE,cAAX,CAA4B,MAAKA,cAAL,CAAoBC,IAApB,+BAA5B,CALiB,aAMlB,CACD;AACF;AACA,K,yDACE,4BAAoB,CAClB,GAAMC,CAAAA,IAAI,CAAGC,MAAM,CAACC,QAAP,CAAgBF,IAAhB,CACZG,SADY,CACF,CADE,EAEZC,KAFY,CAEN,GAFM,EAGZC,MAHY,CAGL,SAAUC,OAAV,CAAmBC,IAAnB,CAAyB,CAC/B,GAAIA,IAAJ,CAAU,CACR,GAAIC,CAAAA,KAAK,CAAGD,IAAI,CAACH,KAAL,CAAW,GAAX,CAAZ,CACAE,OAAO,CAACE,KAAK,CAAC,CAAD,CAAN,CAAP,CAAoBC,kBAAkB,CAACD,KAAK,CAAC,CAAD,CAAN,CAAtC,CACD,CACD,MAAOF,CAAAA,OAAP,CACD,CATY,CASV,EATU,CAAb,CAWA,GAAMI,CAAAA,YAAY,CAAGV,IAAI,CAACU,YAA1B,CACA,KAAKf,KAAL,CAAWgB,MAAX,CAAkB,CAAC,OAAQ,OAAT,CAAkB,QAASD,YAA3B,CAAlB,EAGD,CACH;AACA;AACA;AACA;AACA;AACA;AACA,G,8BACE,wBAAeE,KAAf,CAAsB,CACpBA,KAAK,CAACC,cAAN,GACA,GAAIC,CAAAA,GAAG,CACL,yCACA,sBADA,CAEA,6CAFA,CAGA,SAHA,CAIAC,kBAAkB,CAAC,sEAAD,CAJlB,CAKA,gBALA,CAMAA,kBAAkB,CAAC,6BAAD,CAPpB,CAQEd,MAAM,CAACC,QAAP,CAAkBY,GAAlB,CACH,C,sBAED,iBAAS,iBACP,mBAEI,oBAAC,MAAD,EAAQ,SAAS,CAAC,gBAAlB,CAAmC,OAAO,CAAE,iBAACF,KAAD,QAAW,CAAA,MAAI,CAACd,cAAL,CAAoBc,KAApB,CAAX,EAA5C,gCAFJ,CAMD,C,yBAvDuBtB,S,EA0D1B,GAAM0B,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACpB,KAAD,CAAW,CAC/B,MAAO,CACLqB,IAAI,CAACrB,KAAK,CAACqB,IADN,CAAP,CAGD,CAJH,CAME;AACA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,QAAD,CAAc,CACvC,MAAO,CACLR,MAAM,CAAE,gBAACS,KAAD,QAAWD,CAAAA,QAAQ,CAAE,CAACE,IAAI,CAAE,QAAP,CAAiBC,IAAI,CAAEF,KAAvB,CAAF,CAAnB,EADH,CAAP,CAKD,CAND,CAQF,cAAe5B,CAAAA,OAAO,CAACwB,eAAD,CAAkBE,kBAAlB,CAAP,CAA6CxB,WAA7C,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport {Button} from 'react-bootstrap';\nimport {connect} from 'react-redux';\n\n// I got most of this authorization method from StackOverflow. I used redux to share the token across components. \n\nexport const authEndpoint = 'https://accounts.spotify.com/authorize';\nclass SpotifyAuth extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAuthenticatedWithSpotify: false\n    };\n    this.state.handleRedirect = this.handleRedirect.bind(this);\n  }\n  /**\n   * Runs after component mounts,  decodes the access token if applicable\n   */\n  componentDidMount() {\n    const hash = window.location.hash\n    .substring(1)\n    .split('&')\n    .reduce(function (initial, item) {\n      if (item) {\n        var parts = item.split('=');\n        initial[parts[0]] = decodeURIComponent(parts[1]);\n      }\n      return initial;\n    }, {});\n\n    const access_token = hash.access_token;\n    this.props.change({'name': 'token', 'value': access_token})\n    \n    \n  }\n/**\n * On click of button, redirect to the spotify Implicit-Grant flow portal with our presets. Auth modes used:\n *  user-read-private\n *  playlist-modify-public\n *  playlist-modify-private\n * @param {*} event Change event for button \n */\n  handleRedirect(event) {\n    event.preventDefault();\n    let url =\n      'https://accounts.spotify.com/authorize' +    \n      '?response_type=token' +\n      '&client_id=3f31f6d13b974219a7093698a47d76f9' +\n      '&scope=' +\n      encodeURIComponent('user-read-private%20playlist-modify-public%20playlist-modify-private') +\n      '&redirect_uri=' +\n      encodeURIComponent('https://crowdrec.rudiejd.io');\n      window.location = url;\n  }\n\n  render() {\n    return (\n\n        <Button className=\"sp_button mt-4\" onClick={(event) => this.handleRedirect(event)} >\n          Link spotify to get started\n        </Button>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n      vars:state.vars\n    }\n  };\n  \n  // mapping the dispatches from our reducer to box props \n  const mapDispatchToProps = (dispatch) => {\n    return {\n      change: (vName) => dispatch( {type: 'CHANGE', name: vName} ),\n  \n    }\n  \n  }\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SpotifyAuth);"]},"metadata":{},"sourceType":"module"}