(this.webpackJsonpcrowdrec=this.webpackJsonpcrowdrec||[]).push([[0],{65:function(e,t,a){e.exports=a(80)},70:function(e,t,a){},71:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),s=a.n(c),i=(a(70),a(21)),l=a(22),o=a(28),u=a(26),m=(a(71),a(46)),h=a(39),d=a(9),f=a.n(d),p=a(19),v=a(51),y=a(11),b=a(5),g=a(90),E=a(91),k=a(87),w=a(82),O=a(83),j=a(25),S=a(53),R=new(a.n(S).a),C=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={resultReceived:!1,recOutput:{},errorStatus:void 0},n.handleChange=n.handleChange.bind(Object(y.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(y.a)(n)),n.processResults=n.processResults.bind(Object(y.a)(n)),n.getRecs=n.getRecs.bind(Object(y.a)(n)),n.createPlaylist=n.createPlaylist.bind(Object(y.a)(n)),n.countTracks=n.countTracks.bind(Object(y.a)(n)),n.getRandomTrack=n.getRandomTrack.bind(Object(y.a)(n)),n}return Object(l.a)(a,[{key:"handleChange",value:function(e){this.setState({resultReceived:!1,alert:void 0});var t=e.target,a=t.value,n=t.name;this.setState(Object(v.a)({},n,a)),this.render()}},{key:"handleError",value:function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.status,e.next=401===e.t0?3:429===e.t0?5:501===e.t0?7:9;break;case 3:return this.setState({errorStatus:"You don't seem to be authorized. Try clicking the button above to authorize with Spotify and try again.",resultReceived:!1}),e.abrupt("break",10);case 5:return this.setState({errorStatus:"Looks like we're making too many requests to Spotify right now. Wait a little bit and try that again."}),e.abrupt("break",10);case 7:return this.setState({errorStatus:"Spotify's servers are fried! Check out their status, then try again when they're back up"}),e.abrupt("break",10);case 9:console.log(t);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isPlaylistValid",value:function(){var e=Object(p.a)(f.a.mark((function e(t,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R.getPlaylistTracks(t).then((function(e){if(void 0!==e){var t,n=Object(h.a)(e.items);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(void 0!==r&&null!==r.track&&r.track.artists[0].name===a)return!0}}catch(c){n.e(c)}finally{n.f()}return!1}})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"countTracks",value:function(){var e=Object(p.a)(f.a.mark((function e(t,a,n){var r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 200,e.abrupt("return",R.getPlaylistTracks(t).then((function(e){var t,r=0,c=Object(h.a)(e.items);try{for(c.s();!(t=c.n()).done;){var s=t.value;if(r>200)break;null!=s.track&&s.track.artists[0].name!==a&&""!==s.track.artists[0].name&&(s.track.artists[0].name in n?n[s.track.artists[0].name]++:n[s.track.artists[0].name]=1),r++}}catch(i){c.e(i)}finally{c.f()}})).catch((function(e){429===e.status&&setTimeout(r.countTracks(t,a,n),500),r.handleError(e)})));case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getRecs",value:function(){var e=Object(p.a)(f.a.mark((function e(t){var a,n,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},n=[],e.next=5,R.searchPlaylists(t,{limit:1}).then(function(){var e=Object(p.a)(f.a.mark((function e(c){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.searchPlaylists(t,{limit:50,offset:Math.floor(Math.random()*(c.playlists.total/50))}).then((function(e){var c,s=Object(h.a)(e.playlists.items);try{var i=function(){var e=c.value;n.push(r.isPlaylistValid(e.id,t).then((function(n){return n?r.countTracks(e.id,t,a):null})))};for(s.s();!(c=s.n()).done;)i()}catch(l){s.e(l)}finally{s.f()}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){r.handleError(e)}));case 5:return e.abrupt("return",Promise.all(n).then((function(){return r.setState({recOutput:r.processResults(a),artist:t})})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"processResults",value:function(e){var t={};for(var a in e)e[a]>10&&(t[a]=e[a]);return Object.fromEntries(Object.entries(t).sort((function(e,t){var a=Object(m.a)(e,2)[1];return Object(m.a)(t,2)[1]-a})))}},{key:"getRandomTrack",value:function(e){var t=this;return R.searchTracks(e,{limit:1}).then((function(t){return R.searchTracks(e,{limit:50})})).then((function(a){if(void 0===a||null===a.tracks)return t.getRandomTrack(e);var n=a.tracks.items.filter((function(t){return t.artists[0]=e}));return console.log("filtered: "),console.log(n),console.log("regular: "),console.log(a),n[Math.floor(Math.random()*n.length)]})).catch((function(a){if(429===a.status)return setTimeout((function(){return console.log("waiting to prevent 429...")}),500),t.getRandomTrack(e);t.handleError(a)}))}},{key:"createPlaylist",value:function(){var e=this,t=[],a=[];Object.keys(this.state.recOutput).forEach(function(){var n=Object(p.a)(f.a.mark((function n(r){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.push(e.getRandomTrack(r).then((function(e){return a.push(e.uri)})).catch((function(t){return e.handleError(t)})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),Promise.all(t).then((function(){if(void 0===e.state.errorStatus){var t=[];R.getMe().then((function(t){return R.createPlaylist(t.id,{name:"Recommendations Based on  ".concat(e.state.artist),public:!1})})).then((function(n){a.forEach((function(a){return t.push(R.addTracksToPlaylist(n.id,[a]).catch((function(t){if(429===t.status)return setTimeout((function(){return console.log("waiting to prevent 429...")}),500),R.addTracksToPlaylist(n.id,[a]);e.handleError(t)})))})),e.setState({playlistUrl:n.external_urls.spotify})})),Promise.all(t).then((function(){return e.setState({alert:"Playlist created! Click below to open it up. Enjoy :)"})}))}}))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),R.setAccessToken(this.props.vars.token),this.setState({errorStatus:void 0,alert:void 0}),console.log(this.state),R.searchArtists(this.state.artist).then(function(){var e=Object(p.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRecs(a.artists.items[0].name);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(){void 0===t.state.errorStatus&&(0===Object.keys(t.state.recOutput).length?t.setState({errorStatus:"Unfortunately, we could not find any recommendations for that artist at this time. Feel free to try another one, or try again since recommendations are randomly generated."}):t.setState({resultReceived:!0}))})).catch((function(a){if(429===a.status)return setTimeout((function(){return console.log("waiting to prevent 429...")}),500),t.handleSubmit(e);t.handleError(a)}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,void 0!==this.state.alert?r.a.createElement(g.a,{className:"alert-success"},this.state.alert,r.a.createElement("br",null),r.a.createElement("a",{href:this.state.playlistUrl},this.state.playlistUrl)):null,void 0!==this.state.errorStatus?r.a.createElement(g.a,{className:"alert-danger"},this.state.errorStatus):null,r.a.createElement(E.a,null,r.a.createElement(E.a.Body,null,r.a.createElement(E.a.Title,null,"Enter artist's name for recommendations"),r.a.createElement(k.a,{onSubmit:this.handleSubmit},r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Label,null,"Artist"),r.a.createElement(k.a.Control,{type:"text",placeholder:"Iron Maiden",name:"artist",onChange:this.handleChange,required:!0})),r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Control,{type:"submit",className:"bg-primary text-light col-8 offset-2"})),r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Control,{type:"reset",className:"bg-primary text-light col-8 offset-2"}))))),r.a.createElement("div",{className:"d-block"},this.state.resultReceived?r.a.createElement("h4",null,"Recommended Artists for ",this.state.artist):null,r.a.createElement(w.a,null,r.a.createElement("ul",{className:"col-6"},this.state.resultReceived?Object.keys(this.state.recOutput).map((function(t){return r.a.createElement("li",{key:t},t,":"," ",e.state.recOutput[t])})):null),this.state.resultReceived?r.a.createElement(O.a,{className:"mt-3 col-6 h-50 w-50",onClick:this.createPlaylist},"Create a playlist with songs from these artists"):null)))}}]),a}(n.Component),T=Object(b.f)(Object(j.b)((function(e){return{vars:e.vars}}),(function(e){return{change:function(t){return e({type:"CHANGE",name:t})}}}))(C)),x=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={isAuthenticatedWithSpotify:!1},n.state.handleRedirect=n.handleRedirect.bind(Object(y.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e}),{}).access_token;this.props.change({name:"token",value:e})}},{key:"handleRedirect",value:function(e){e.preventDefault();var t="https://accounts.spotify.com/authorize?response_type=token&client_id=3f31f6d13b974219a7093698a47d76f9&scope="+encodeURIComponent("user-read-private%20playlist-modify-public%20playlist-modify-private")+"&redirect_uri="+encodeURIComponent("http://crowdrec.rudiejd.io:3000");window.location=t}},{key:"render",value:function(){var e=this;return r.a.createElement(O.a,{className:"sp_button",onClick:function(t){return e.handleRedirect(t)}},"Link spotify to get started")}}]),a}(n.Component),N=Object(j.b)((function(e){return{vars:e.vars}}),(function(e){return{change:function(t){return e({type:"CHANGE",name:t})}}}))(x),P=a(84),I=a(85),M=a(56),_=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{className:"text-justify"},r.a.createElement(I.a,null,r.a.createElement("h1",{className:"display-4"},"Crowd-sourced Spotify recommendations"),r.a.createElement("p",null,"Unsatisfied with your spotify recommendations? I was too; that's why I made this website. This site delivers recommendations based on",r.a.createElement("b",null," playlist adjacency")," above all. That is, I give you a set of new artists who appear in playlists with a given artist at a high frequency, all ranked by the number of times they are in the same playlists as the artist you entered."),r.a.createElement(N,null))),r.a.createElement(I.a,{fluid:!0},r.a.createElement(w.a,null,r.a.createElement(M.a,{lg:6,className:"offset-lg-3"},r.a.createElement(T,null)))))},D=a(86),U=function(){return r.a.createElement("form",{action:"https://www.paypal.com/cgi-bin/webscr",method:"post",target:"_top"},r.a.createElement("input",{type:"hidden",name:"cmd",value:"_donations"}),r.a.createElement("input",{type:"hidden",name:"business",value:"jdrudienoy@gmail.com"}),r.a.createElement("input",{type:"hidden",name:"item_name",value:"Donations for upkeep my website, CrowdRec"}),r.a.createElement("input",{type:"hidden",name:"currency_code",value:"USD"}),r.a.createElement("input",{type:"image",src:"https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif",border:"0",name:"submit",title:"PayPal - The safer, easier way to pay online!",alt:"Donate with PayPal button"}),r.a.createElement("img",{alt:"",border:"0",src:"https://www.paypal.com/en_US/i/scr/pixel.gif",width:"1",height:"1"}))},A=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,null,r.a.createElement(w.a,null,r.a.createElement(M.a,{xs:12},r.a.createElement("header",{className:"text-center"},r.a.createElement("h1",{className:"font-weight-bold text-white"},"Hi, I'm JD Rudie.")))),r.a.createElement(w.a,null,r.a.createElement(M.a,{lg:12,className:"text-justify"},r.a.createElement(D.a,{src:"https://i.pinimg.com/originals/10/71/a6/1071a68d76b0673337b84c84d37c8100.gif",className:"float-left"}),r.a.createElement("p",null,"I am a junior Mathematics and Computer Science student at Miami University in Oxford, Ohio. I intern at Wolfram Research in the Enterprise Data Analysis department."),r.a.createElement("p",null,"I've been enthusiastic about music my whole life. Some of my all time favorites are David Bowie, Run The Jewels, Sufjan Stevens, MF DOOM, OutKast, Parquet Courts, Deafheaven, Megadeth, and Fiona Apple. "),r.a.createElement("p",null,"My social media is linked below just in case you're feeling like donating some clout. I also greatly appreciate PayPal donos since I'm a struggling college student."))),r.a.createElement(w.a,{className:"mt-lg-5"},r.a.createElement(M.a,{lg:4,align:"center"},r.a.createElement(D.a,{src:"github.png"})),r.a.createElement(M.a,{align:"center"},r.a.createElement(D.a,{src:"spotify.svg",width:"120",height:"120"})),r.a.createElement(M.a,{align:"center"},r.a.createElement(D.a,{src:"insta.svg",width:"120",height:"120"}))),r.a.createElement(w.a,{Col:!0,md:2,className:"offset-md-5 mt-5"},r.a.createElement(U,null))))},F=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"We could not find that page. Instead, here's a picture of Ozzy Osbourne."))},G=a(57),J=a(24),B=a(89),W=a(88);function z(){var e=Object(G.a)(["\nbackground-color:green;\n"]);return z=function(){return e},e}var H=a(58).a.div(z()),q=function(){return r.a.createElement(H,null,r.a.createElement(B.a,{expand:"lg",className:"navbar-dark bg-primary"},r.a.createElement(I.a,null,r.a.createElement(B.a.Brand,{href:"/"},"CrowdRec"),r.a.createElement(B.a.Toggle,{"aria-controls":"navbar-nav"}),r.a.createElement(B.a.Collapse,{id:"navbar-nav"},r.a.createElement(W.a,{className:"ml-auto"},r.a.createElement(W.a.Item,null,r.a.createElement(J.b,{to:"/",className:"nav-link"},"Home")),r.a.createElement(W.a.Item,null,r.a.createElement(J.b,{to:"/about",className:"nav-link"},"About")))))))},L=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{basename:"".concat("","/")},r.a.createElement(q,null),r.a.createElement("main",{role:"main"},r.a.createElement(b.c,null,r.a.createElement(b.a,{exact:!0,path:"/",component:_}),r.a.createElement(b.a,{exact:!0,path:"/about",component:A}),r.a.createElement(b.a,{component:F}))),r.a.createElement("footer",{className:"page-footer w-100 font-small pt-4 text-center navbar fixed-bottom"},"Copyright 2020 JD Rudie")))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V={vars:{}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0,a=JSON.parse(JSON.stringify(e));return"CHANGE"===t.type&&(a.vars[t.name.name]=t.name.value,console.log(a)),a},Y=a(34),$=Object(Y.b)(K);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j.a,{store:$}," ",r.a.createElement(L,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[65,1,2]]]);
//# sourceMappingURL=main.74724759.chunk.js.map